# (1) 동시에 같은 `DB Table row` 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.

동시성 문제는 여러 사용자 또는 프로세스가 동시에 데이터베이스에 접근하고 수정할 때 발생하는 문제입니다. 이러한 문제를 방어하지 않으면 데이터 일관성이 깨질 수 있고, 예기치 않은 결과가 발생할 수 있습니다. 따라서 이러한 동시성 문제를 방어하고 데이터의 정확성을 유지하기 위한 노력이 필요합니다. 

동시에 같은 DB 테이블 행을 업데이트하는 상황을 방어하기 위한 구체적인 개발 접근 방법을  사례와 함께 설명하겠습니다.

1. 트랜잭션
데이터베이스 트랜잭션을 사용하여 여러 업데이트 작업을 하나의 논리적 단위로 묶어 처리합니다. 이것은 데이터베이스의 ACID (Atomicity, Consistency, Isolation, Durability) 특성을 유지하고, 동시성 문제를 방지합니다. 모든 업데이트 작업은 트랜잭션 내에서 실행되어, 성공하거나 실패하면 모두 롤백됩니다.
> 은행 계좌 잔액 업데이트: 여러 사용자가 동시에 같은 계좌에서 자금을 인출하려고 할 때, 트랜잭션을 사용하여 한 번에 하나의 인출 트랜잭션만 허용합니다. 이렇게 하면 계좌 잔액이 정확하게 유지됩니다.

2. 데이터베이스 락
데이터베이스에서 락(lock)을 사용하여 동시 업데이트를 방지합니다. 락은 특정 행 또는 테이블을 다른 트랜잭션에서 변경할 수 없게 만듭니다. 다음은 락의 두 가지 주요 유형입니다:

- 공유 락(Shared Lock): 다른 트랜잭션은 읽을 수 있지만 쓰기는 허용되지 않습니다.
- 배타적 락(Exclusive Lock): 다른 트랜잭션은 읽기 및 쓰기가 모두 금지됩니다.
> 도서 대출 관리 시스템: 도서 대출 시 여러 사용자가 동시에 동일한 도서를 대출하려고 할 때, 해당 도서 행에 대한 배타적 락을 설정합니다. 한 사용자가 대출을 완료할 때까지 다른 사용자는 해당 도서를 대출할 수 없습니다.